{"version":3,"file":"index.esm.js","sources":["../src/mui-sleazebox/FlexBox.tsx"],"sourcesContent":["import React, {useMemo} from 'react'\nimport {\n  Box,\n  Theme,\n  useTheme,\n  BoxProps,\n  Breakpoint,\n  Breakpoints\n} from '@mui/material'\nimport {createStyles, makeStyles} from '@mui/styles'\nimport clsx from 'clsx'\n\ntype EnhancedFlexProp =\n  | BoxProps['flex']\n  | boolean\n  | 'grow'\n  | 'nogrow'\n  | 'noshrink'\n\ntype Props = {\n  flexSpacing?: number\n  wrapSpacing?: number\n  children?: React.ReactNode\n  child?: boolean\n  flex?: EnhancedFlexProp\n} & Omit<BoxProps, 'flex'>\n\ntype RowBoxUseStylesProps = {\n  flexSpacing?: number\n  wrapSpacing?: number\n  halfRespSpacing?: boolean\n  respBreakAt: Breakpoint\n  respElseAt: Breakpoint\n}\ntype ColBoxUseStylesProps = {flexSpacing?: number}\ntype BreakpointValues = Breakpoints['values']\n\nexport type RowBoxProps = Props & {\n  responsive?: boolean | Breakpoint\n  halfRespSpacing?: boolean\n}\nexport type ChildBoxProps = {\n  children?: React.ReactNode\n  flex?: EnhancedFlexProp\n} & BoxProps\nexport type {Props as FlexBoxProps}\nexport type {Props as ColumnBoxProps}\n\n/*\n  Note, using a dynamic className such as useFlexSpacing did not work when applying specificity with a selector such as '&$useFlexSpacing'. Note sure why, but the workaround is to simply apply the className as a string.\n\n  [TODO] Using flexSpacing with <RowBox responsive/> is very opinionated with it's current setup. It assumes the same top and left margin will be used with Flex Column and Flex Row layouts respectively. In addition, generally, using flexWrap with <RowBox responsive/> will be avoided due to use of top margin's with <ChildBox/>. The workaround in both cases is to simply not use <RowBox responsive/> and use\n   <RowBox flexDirection={{xs: 'column', sm: 'row'}} /> with custom top margins passed in as props while using the flexSpacing prop to control left margins.\n*/\n\n/*\n  See links for more info:\n  https://www.w3schools.com/cssref/css3_pr_flex.asp\n  Useful terminology/abbreviations from https://github.com/angular/flex-layout/wiki/fxFlex-API\n  alias \t    Equivalent CSS:\n  initial \t  flex: 0 1 auto\n  auto \t      flex: <grow> <shrink> 100%\n  none \t      flex: 0 0 auto\n  grow \t      flex: 1 1 100%\n  nogrow \t    flex: 0 1 auto\n  noshrink \t  flex: 1 0 auto\n*/\n\nconst useEnhancedFlexProp = (flexProp: EnhancedFlexProp): BoxProps['flex'] => {\n  const flex = useMemo(() => {\n    switch (flexProp) {\n      case true:\n        return 'auto' // Or '1 1 auto'\n      case false:\n        return '0 0 auto' // Or 'none'\n      case 'grow':\n        return '1 1 100%'\n      case 'nogrow':\n        return '0 1 auto' // Or 'initial'\n      case 'noshrink':\n        return '1 0 auto'\n      default:\n        return flexProp\n    }\n  }, [flexProp])\n\n  return flex\n}\n\nconst useRowBoxStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    respRowBox: ({\n      flexSpacing,\n      wrapSpacing,\n      halfRespSpacing,\n      respBreakAt,\n      respElseAt\n    }: RowBoxUseStylesProps) => ({\n      [theme.breakpoints.down(respBreakAt)]: {\n        ...(typeof flexSpacing === 'number' && {\n          marginTop:\n            parseFloat(theme.spacing(flexSpacing)) *\n            -1 *\n            (halfRespSpacing ? 0.5 : 1),\n          '& > .flexBox__child': {\n            marginTop:\n              parseFloat(theme.spacing(flexSpacing)) *\n              (halfRespSpacing ? 0.5 : 1)\n            // This bit is redundant with Column layout\n            // ...(flexWrap && {\n            //   marginTop: theme.spacing(flexSpacing)\n            // })\n          }\n        })\n      },\n      [theme.breakpoints.up(respElseAt)]: {\n        ...(typeof flexSpacing === 'number' && {\n          marginLeft: parseFloat(theme.spacing(flexSpacing)) * -1\n        }),\n        ...(typeof wrapSpacing === 'number' && {\n          marginTop: theme.spacing(wrapSpacing * -1)\n        }),\n        '& > .flexBox__child': {\n          ...(typeof flexSpacing === 'number' && {\n            marginLeft: theme.spacing(flexSpacing)\n          }),\n          ...(typeof wrapSpacing === 'number' && {\n            marginTop: theme.spacing(wrapSpacing)\n          })\n        }\n      }\n    }),\n    rowBox: ({flexSpacing, wrapSpacing}: RowBoxUseStylesProps) => ({\n      ...(typeof flexSpacing === 'number' && {\n        marginLeft: parseFloat(theme.spacing(flexSpacing)) * -1\n      }),\n      ...(typeof wrapSpacing === 'number' && {\n        marginTop: theme.spacing(wrapSpacing * -1)\n      }),\n      '& > .flexBox__child': {\n        ...(typeof flexSpacing === 'number' && {\n          marginLeft: theme.spacing(flexSpacing)\n        }),\n        ...(typeof wrapSpacing === 'number' && {\n          marginTop: theme.spacing(wrapSpacing)\n        })\n      }\n    })\n  })\n)\n\nconst useColBoxStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    colBox: ({flexSpacing}: ColBoxUseStylesProps) => ({\n      ...(typeof flexSpacing === 'number' && {\n        marginTop: parseFloat(theme.spacing(flexSpacing)) * -1,\n        '& > .flexBox__child': {\n          marginTop: theme.spacing(flexSpacing)\n        }\n      })\n    })\n  })\n)\n\nconst EnhancedBox = ({children, flex: flexProp, ...rest}: Props) => {\n  const flex = useEnhancedFlexProp(flexProp)\n  return (\n    <Box flex={flex} {...rest}>\n      {children}\n    </Box>\n  )\n}\n\nconst FlexBox = ({\n  children,\n  child = false,\n  className: classNameProp,\n  ...rest\n}: Props) => {\n  return (\n    <EnhancedBox\n      display=\"flex\"\n      className={clsx([{['flexBox__child']: child}, classNameProp])}\n      {...rest}\n    >\n      {children}\n    </EnhancedBox>\n  )\n}\n\nconst RowBox = ({\n  children,\n  flexSpacing,\n  halfRespSpacing = true,\n  className: classNameProp,\n  responsive = false,\n  flexWrap,\n  wrapSpacing: wrapSpacingProp,\n  ...rest\n}: RowBoxProps) => {\n  const respBreakAt: Breakpoint = useMemo(\n    () => (!responsive || responsive === true ? 'xs' : responsive),\n    [responsive]\n  )\n\n  const theme = useTheme()\n\n  const breakpoints = useMemo(\n    () =>\n      // For typescript reference see https://fettblog.eu/typescript-better-object-keys\n      Object.keys(theme.breakpoints.values)\n        .map((k) => ({\n          key: k as keyof BreakpointValues,\n          value: theme.breakpoints.values[k as keyof BreakpointValues]\n        }))\n        .sort((a, b) => a.value - b.value),\n    [theme]\n  )\n  const respElseAt: Breakpoint = useMemo(() => {\n    const idx = breakpoints.findIndex((a) => a.key === respBreakAt)\n    return breakpoints[idx + 1].key as Breakpoint\n  }, [breakpoints, respBreakAt])\n\n  const isFlexWrap = flexWrap === 'wrap'\n  const wrapSpacing = !isFlexWrap\n    ? undefined\n    : typeof wrapSpacingProp === 'number'\n    ? wrapSpacingProp\n    : flexSpacing\n\n  const classes = useRowBoxStyles({\n    flexSpacing,\n    respBreakAt,\n    respElseAt,\n    wrapSpacing,\n    halfRespSpacing\n  })\n\n  const flexDirection: Props['flexDirection'] = useMemo(() => {\n    switch (responsive) {\n      case false:\n        return 'row'\n      case true:\n      case 'xs':\n        return {xs: 'column', sm: 'row'}\n      case 'sm':\n        return {xs: 'column', md: 'row'}\n      case 'md':\n        return {xs: 'column', lg: 'row'}\n      case 'lg':\n        return {xs: 'column', xl: 'row'}\n      default:\n        return 'row'\n    }\n  }, [responsive])\n\n  return (\n    <FlexBox\n      flexDirection={flexDirection}\n      className={clsx([\n        {\n          [classes.respRowBox]: responsive,\n          [classes.rowBox]: !responsive\n        },\n        classNameProp\n      ])}\n      flexWrap={flexWrap}\n      {...rest}\n    >\n      {children}\n    </FlexBox>\n  )\n}\n\nconst ColumnBox = ({\n  children,\n  flexSpacing,\n  className: classNameProp,\n  ...rest\n}: Props) => {\n  const classes = useColBoxStyles({flexSpacing})\n  return (\n    <FlexBox\n      flexDirection=\"column\"\n      className={clsx([classes.colBox, classNameProp])}\n      {...rest}\n    >\n      {children}\n    </FlexBox>\n  )\n}\n\nconst ChildBox = ({\n  children,\n  className: classNameProp,\n  ...rest\n}: ChildBoxProps) => {\n  return (\n    <EnhancedBox className={clsx(['flexBox__child', classNameProp])} {...rest}>\n      {children}\n    </EnhancedBox>\n  )\n}\n\nexport {RowBox, ColumnBox, ChildBox, FlexBox}\nexport default FlexBox\n"],"names":["useRowBoxStyles","makeStyles","theme","createStyles","respRowBox","flexSpacing","wrapSpacing","halfRespSpacing","respElseAt","breakpoints","down","respBreakAt","marginTop","parseFloat","spacing","& > .flexBox__child","up","marginLeft","rowBox","useColBoxStyles","colBox","EnhancedBox","children","flexProp","flex","rest","useMemo","useEnhancedFlexProp","React","Box","FlexBox","child","classNameProp","className","display","clsx","RowBox","responsive","flexWrap","wrapSpacingProp","useTheme","Object","keys","values","map","k","key","value","sort","a","b","idx","findIndex","classes","undefined","flexDirection","xs","sm","md","lg","xl","ColumnBox","ChildBox"],"mappings":"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"}